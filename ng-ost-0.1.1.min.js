/*
 * ng-ost
 * http://ostusa.github.io/ng-ost

 * Version: 0.1.1 - 2014-03-05
 * License: 
 */
angular.module("ngOst",["ngOst.directives.busyButton","ngOst.directives.confirmButton","ngOst.directives.tdSearch","ngOst.directives.tdSort","ngOst.filters.blankData","ngOst.filters.humanize","ngOst.filters.paged","ngOst.filters.prettyDate","ngOst.filters.stringFormat","ngOst.filters.truncate","ngOst.filters.usPhoneNumber","ngOst.filters.yesNo"]),angular.module("ngOst.directives.busyButton",[]).constant("busyButtonConfig",{initialState:"reset",busyState:"loading"}).controller("busyButtonController",["busyButtonConfig",function(a){this.busyState=a.busyState,this.initialState=a.initialState}]).directive("ngOstBusyButton",[function(){return{require:["ngOstBusyButton"],controller:"busyButtonController",link:function(a,b,c,d){var e=d[0];a.$watch(function(){return a.$eval(c.busyButton)},function(a){return a?void b.button(e.busyState):void b.button(e.initialState)})}}}]),angular.module("ngOst.directives.confirmButton",[]).constant("confirmButtonConfig",{message:"Are you sure?"}).controller("confirmButtonController",["confirmButtonConfig",function(a){this.message=a.message||"Are you sure?"}]).directive("ngOstConfirmButton",[function(){return{require:["ngOstConfirmButton"],controller:"confirmButtonController",link:function(a,b,c,d){var e=d[0];b.bind("click",function(b){var d=c.confirmMessage;confirm(d||e.message)&&c.ngClick&&a.$eval(c.ngClick),b.stopImmediatePropagation()})}}}]),angular.module("ngOst.directives.tdSearch",[]).directive("ngOstTdSearch",[function(){return{restrict:"E",replace:!0,require:["search"],template:'<div><input placeholder="search" ng-model="search" ng-show="searching" ng-blur="searchBlur()" class="col-sm-2 table-search-input ng-valid ng-dirty ng-hide"><a ng-click="searchClick()" class="pointer"><i class="glyphicon glyphicon-search"></i></a></div>',scope:{search:"="},controller:["$scope",function(a){a.searchClick=function(){a.searching=!a.searching,a.searching||(a.search="")},a.searchBlur=function(){a.search||(a.searching=!1)}}]}}]),angular.module("ngOst.directives.tdSort",[]).directive("ngOstTdSort",[function(){return{restrict:"E",replace:!0,require:["sort","sortDirection"],template:'<a ng-click="setSort()">{{ text }} <i class="glyphicon" ng-class="{\'glyphicon-sort-by-attributes\':!sortDirection, \'glyphicon-sort-by-attributes-alt\':sortDirection}" ng-show="sort==sortTarget"></i></a>',scope:{sort:"=",sortDirection:"=",sortTarget:"@",text:"@"},controller:["$scope",function(a){a.setSort=function(){return a.sort===a.sortTarget?a.sortDirection?void(a.sort=a.sortDirection=""):void(a.sortDirection=!a.sortDirection):(a.sort=a.sortTarget,void(a.sortDirection=!1))}}]}}]),angular.module("ngOst.filters.blankData",[]).filter("blankData",[function(){return function(a,b){return 0===a||a?a:b||"-"}}]),angular.module("ngOst.filters.humanize",[]).filter("humanize",[function(){function a(a){return a.replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})}function b(a,b){return a.replace(/[A-Z]/g,function(a){return b+a})}return function(c){return angular.isString(c)?a(b(c," ").split("_").join(" ")):c}}]),angular.module("ngOst.filters.paged",[]).filter("paged",function(){return function(a,b,c,d){return!angular.isArray(a)||d||b>c?a:a.slice(b,c)}}),angular.module("ngOst.filters.prettyDate",[]).filter("prettyDate",[function(){return function(a){if(!a||!angular.isString(a))return a;var b,c=[[60,"just now"],[90,"1 minute"],[3600,"minutes",60],[5400,"1 hour"],[86400,"hours",3600],[129600,"1 day"],[604800,"days",86400],[907200,"1 week"],[2628e3,"weeks",604800],[3942e3,"1 month"],[31536e3,"months",2628e3],[47304e3,"1 year"],[31536e5,"years",31536e3]],d=(""+a).replace(/-/g,"/").replace(/[TZ]/g," "),e=new Date,f=(e-new Date(d)+6e4*e.getTimezoneOffset())/1e3,g=" ago",h=0;for(0>f&&(f=Math.abs(f),g="");b=c[h++];)if(f<b[0])return 2===b.length?b[1]+(h>1?g:""):Math.round(f/b[2])+" "+b[1]+(h>1?g:"");return a}}]),angular.module("ngOst.filters.stringFormat",[]).filter("stringFormat",[function(){return function(a,b){if(!a&&!angular.isString(a))return a;var c=a,d=[];if(angular.isArray(b))d=b;else for(var e=1;e<arguments.length;e++)d.push(arguments[e]);for(var f=0;f<d.length;f++){var g=new RegExp("\\{"+f+"\\}","gi");c=c.replace(g,d[f])}return c}}]),angular.module("ngOst.filters.truncate",[]).filter("truncate",[function(){return function(a,b,c){if(!a||!angular.isString(a))return a;if(isNaN(b)&&(b=25),void 0===c&&(c="..."),c.length>b)throw new Error("length cannot be less than end.length");return a.length>b||a.length-c.length>b?a.substring(0,b-c.length)+c:a}}]),angular.module("ngOst.filters.usPhoneNumber",[]).filter("usPhoneNumber",[function(){return function(a,b){if(!a)return a;var c=a.replace(/[^\d]/g,"");switch(10===c.length&&b&&(c="1"+c),11!==c.length||b||b!==!1||(c=c.substring(1,11)),c.length){case 11:return c.replace(/(\d{1})(\d{3})(\d{3})(\d{4})/,"$1($2)$3-$4");case 10:return c.replace(/(\d{3})(\d{3})(\d{4})/,"($1)$2-$3");default:return a}}}]),angular.module("ngOst.filters.yesNo",[]).filter("yesNo",[function(){return function(a,b){if(a===!1)return"no";if(a===!0)return"yes";if(!a&&b)return"no";var c=["yes","true","1"],d=["no","false","0"];if(angular.isString(a)){var e=a.toLowerCase();if(d.indexOf(e)>-1)return"no";if(c.indexOf(e)>-1)return"yes"}return angular.isNumber(a)?1===a?"yes":"no":a}}]);